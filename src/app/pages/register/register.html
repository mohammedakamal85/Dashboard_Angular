<div class="register-container">
    <div class="register-card">
        <div class="register-header">
            <h1>Create Account</h1>
            <p>Join our dashboard community</p>
        </div>

        @if (successMessage) {
        <div class="success-alert">
            <span class="success-icon">✓</span>
            <div class="success-content">
                <p class="success-message">{{ successMessage }}</p>
            </div>
        </div>
        }

        @if (errorMessage) {
        <div class="error-alert">
            <span class="error-icon">❌</span>
            <div class="error-content">
                <p class="error-title">Registration Failed</p>
                <p class="error-message">{{ errorMessage }}</p>
            </div>
        </div>
        }

        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
            <!-- Name Field -->
            <div class="form-group">
                <label for="name" class="form-label">Full Name</label>
                <input type="text" id="name" formControlName="name" class="form-control"
                    placeholder="Enter your full name" [class.error]="submitted && f['name'].errors" />
                @if (submitted && f['name'].errors) {
                <span class="error-text">{{ getErrorMessage('name') }}</span>
                }
            </div>

            <!-- Email Field -->
            <div class="form-group">
                <label for="email" class="form-label">Email Address</label>
                <input type="email" id="email" formControlName="email" class="form-control"
                    placeholder="Enter your email" [class.error]="submitted && f['email'].errors" />
                @if (submitted && f['email'].errors) {
                <span class="error-text">{{ getErrorMessage('email') }}</span>
                }
            </div>

            <!-- Password Field -->
            <div class="form-group">
                <label for="password" class="form-label">Password</label>
                <input type="password" id="password" formControlName="password" class="form-control"
                    placeholder="Create a strong password" [class.error]="submitted && f['password'].errors" />

                @if (f['password'].value) {
                <div class="password-strength">
                    <div class="strength-bar">
                        <div class="strength-fill" [style.width]="(passwordStrength / 5) * 100 + '%'"
                            [style.backgroundColor]="getPasswordStrengthColor()"></div>
                    </div>
                    <span class="strength-label" [style.color]="getPasswordStrengthColor()">
                        {{ getPasswordStrengthLabel() }}
                    </span>
                </div>
                }

                @if (submitted && f['password'].errors) {
                <div class="password-requirements">
                    <p class="req-title">Password must include:</p>
                    <ul class="req-list">
                        <li [class.met]="!f['password'].hasError('noUppercase')">
                            <span class="req-icon">✓</span> At least one uppercase letter (A-Z)
                        </li>
                        <li [class.met]="!f['password'].hasError('noLowercase')">
                            <span class="req-icon">✓</span> At least one lowercase letter (a-z)
                        </li>
                        <li [class.met]="!f['password'].hasError('noNumber')">
                            <span class="req-icon">✓</span> At least one number (0-9)
                        </li>
                        <li [class.met]="!f['password'].hasError('noSpecialChar')">
                            <span class="req-icon">✓</span> At least one special character (!@#$%^&*)
                        </li>
                        <li [class.met]="!f['password'].hasError('minlength')">
                            <span class="req-icon">✓</span> Minimum 12 characters
                        </li>
                    </ul>
                </div>
                }

                <span class="error-text">{{ getErrorMessage('password') }}</span>
            </div>

            <!-- Confirm Password Field -->
            <div class="form-group">
                <label for="confirmPassword" class="form-label">Confirm Password</label>
                <input type="password" id="confirmPassword" formControlName="confirmPassword" class="form-control"
                    placeholder="Re-enter your password"
                    [class.error]="submitted && (f['confirmPassword'].errors || registerForm.hasError('passwordMismatch'))" />
                @if (submitted && f['confirmPassword'].errors) {
                <span class="error-text">{{ getErrorMessage('confirmPassword') }}</span>
                }
                @if (submitted && registerForm.hasError('passwordMismatch')) {
                <span class="error-text">{{ getFormErrorMessage() }}</span>
                }
            </div>

            <!-- Terms Checkbox -->
            <div class="form-check">
                <input type="checkbox" id="agreeTerms" formControlName="agreeTerms" class="form-check-input"
                    [class.error]="submitted && f['agreeTerms'].errors" />
                <label for="agreeTerms" class="form-check-label">
                    I agree to the Terms & Conditions
                </label>
                @if (submitted && f['agreeTerms'].errors) {
                <span class="error-text">{{ getErrorMessage('agreeTerms') }}</span>
                }
            </div>

            <!-- Submit Button -->
            <button type="submit" class="btn btn-primary" [disabled]="loading">
                @if (loading) {
                <span class="btn-loader">⏳</span>
                } @else {
                <span>Create Account</span>
                }
            </button>
        </form>

        <!-- Login Link -->
        <div class="auth-link">
            <p>Already have an account? <a routerLink="/login" class="link">Sign in here</a></p>
        </div>
    </div>

    <!-- Decorative Background -->
    <div class="background-decoration"></div>
</div>